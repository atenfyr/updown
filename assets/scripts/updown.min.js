'use strict';var score=0,isDisabled=!1,block=[3],autoLoseTimer,appearTimer,xDown,yDown,updateScore=function(a){isDisabled||(document.getElementById('score').innerHTML='<br>Score: '+a)},getHighscore=function(){var a=document.cookie.match(/highscore=(\d*)/);return a&&1<a.length?a[1]||0:0},endGame=function(){isDisabled||(isDisabled=!0,score>getHighscore()?(document.cookie='highscore='+score+'; expires=Fri, 31 Dec 9999 23:59:59 GMT',document.getElementById('highscore').innerHTML='New high score!'):document.getElementById('highscore').innerHTML='High score: '+getHighscore(),document.getElementById('highscore').innerHTML+='<br>',appearTimer=setTimeout(function(){document.getElementById('highscore').style.display='',appearTimer=setTimeout(function(){document.getElementById('refresh').style.display=''},800)},400))},resetGame=function(){score=0,block=[3],isDisabled=!0,autoLoseTimer&&clearTimeout(autoLoseTimer),autoLoseTimer=void 0,appearTimer&&clearTimeout(appearTimer),appearTimer=void 0,document.getElementById('score').innerHTML='Score: 0',document.getElementById('lastmove').innerHTML='',document.getElementById('highscore').innerHTML='',document.getElementById('lastmove').style.display='none',document.getElementById('highscore').style.display='none',document.getElementById('refresh').style.display='none',document.getElementById('instructions').style.display='',isDisabled=!1},handleKey=function(a){if((a=a||window.event,!isDisabled&&a&&a.keyCode)&&(38===a.keyCode||40===a.keyCode||87===a.keyCode||83===a.keyCode)){switch(3===block[0]&&(block=[],document.getElementById('instructions').style.display='none',document.getElementById('lastmove').style.display='',updateScore(0)),a.keyCode){case 38:case 87:20<=document.getElementById('lastmove').innerHTML.length?document.getElementById('lastmove').innerHTML='\u2191':document.getElementById('lastmove').innerHTML+='\u2191',block.push(2);break;case 40:case 83:20<=document.getElementById('lastmove').innerHTML.length?document.getElementById('lastmove').innerHTML='\u2193':document.getElementById('lastmove').innerHTML+='\u2193',block.push(1);}autoLoseTimer&&clearTimeout(autoLoseTimer),autoLoseTimer=setTimeout(endGame,300),(block[0]&&2!==block[0]||block[1]&&2!==block[1]||block[2]&&1!==block[2]||block[3]&&1!==block[3])&&endGame(),4<=block.length&&(block=[],updateScore(++score))}};window.addEventListener('load',function(){document.getElementById('wrapper2').style.display='',window.cookieconsent.initialise({palette:{popup:{background:'#efefef',text:'#404040'},button:{background:'#8ec760',text:'#ffffff'}},content:{message:'This website uses cookies to save your high score.'}}),document.addEventListener('touchstart',function(a){xDown=a.touches[0].clientX,yDown=a.touches[0].clientY},!1),document.addEventListener('touchmove',function(a){xDown&&yDown&&(Math.abs(xDown-a.touches[0].clientX)<Math.abs(yDown-a.touches[0].clientY)&&(0<yDown-a.touches[0].clientY?handleKey({keyCode:38}):handleKey({keyCode:40})),xDown=null,yDown=null)},!1),document.addEventListener('keydown',handleKey)});